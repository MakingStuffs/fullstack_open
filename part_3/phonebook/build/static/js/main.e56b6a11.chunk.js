(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(16),u=t.n(o),c=t(6),i=t(3),l=function(e){var n=e.type,t=e.onChange;return r.a.createElement("input",{onChange:t,type:n})},s=function(e){var n=e.type,t=e.onClick,a=e.text;return r.a.createElement("button",{onClick:t,type:n},a)},m=function(e){var n=e.nameChangeHandler,t=e.numberChangeHandler,a=e.submitHandler;return r.a.createElement("form",null,r.a.createElement("label",null,"Name: "),r.a.createElement(l,{onChange:n,type:"text"}),r.a.createElement("label",null,"Number: "),r.a.createElement(l,{onChange:t,type:"number"}),r.a.createElement(s,{onClick:a,type:"submit",text:"submit"}))},f=function(e){var n=e.persons,t=e.filter,a=e.clickHandler;return r.a.createElement("ul",null,n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return r.a.createElement("li",{key:e.name},e.name," - ",e.number,r.a.createElement(s,{onClick:function(){return a(e.id)},type:"submit",text:"Delete"}))})))},h=function(e){var n=e.message;if(null===n)return null;var t={padding:"1rem",border:"2px solid ".concat(!0===n.fail?"red":"green"),fontSize:16,borderRadius:10};return r.a.createElement("div",{style:t},n.content)},d=t(2),b=t.n(d),p=t(4),v=t(5),k=t.n(v),w="/api/persons";console.log(w);var g={getAll:function(){var e=Object(p.a)(b.a.mark((function e(){var n,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.a.get(w),t={id:999,name:"Not-on Server",number:"07878797865"},e.abrupt("return",n.then((function(e){return e.data.concat(t)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addOne:function(){var e=Object(p.a)(b.a.mark((function e(n){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.a.post(w,n),e.abrupt("return",t.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),deleteOne:function(){var e=Object(p.a)(b.a.mark((function e(n){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.a.delete("".concat(w,"/").concat(n)),e.abrupt("return",t.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),updateOne:function(){var e=Object(p.a)(b.a.mark((function e(n){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.a.put("".concat(w,"/").concat(n.id),n),e.abrupt("return",t.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},y=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),s=Object(i.a)(u,2),d=s[0],b=s[1],p=Object(a.useState)(""),v=Object(i.a)(p,2),k=v[0],w=v[1],y=Object(a.useState)(""),E=Object(i.a)(y,2),O=E[0],C=E[1],j=Object(a.useState)(null),T=Object(i.a)(j,2),x=T[0],H=T[1],S=function(e){if("name"===e){var n=Object(c.a)({},t.find((function(e){return e.name.toLowerCase()===k.toLowerCase()}))),a="".concat(n.name," is already in the phone book. Would you like to update the phone number to ").concat(O,"?");window.confirm(a)&&(n.number=O,g.updateOne(n).then((function(e){o(t.map((function(e){return e.id!==n.id?e:n}))),H({content:"The number associated with ".concat(e.name," has been changed to ").concat(e.number),fail:!1}),setTimeout((function(){H(null)}),5e3)})).catch((function(e){H({content:"It looks as though there has been an error. The number for ".concat(n.name," has not been updated."),fail:!0}),setTimeout((function(){H(null)}),5e3)})))}else{var r=Object(c.a)({},t.find((function(e){return e.number===O}))),u="".concat(r.number," is already in the phone book under the name ").concat(r.name,". Would you like to change the name to ").concat(k,"?");window.confirm(u)&&(r.name=k,g.updateOne(r).then((function(e){o(t.map((function(e){return e.id!==r.id?e:r}))),H({content:"The name associated with the number ".concat(e.number," has been changed to ").concat(e.name),fail:!1}),setTimeout((function(){H(null)}),5e3)})).catch((function(e){H({content:"It looks as though there has been an error. The name associated with ".concat(r.number," has not been updated."),fail:!0}),setTimeout((function(){H(null)}),5e3)})))}};return Object(a.useEffect)((function(){g.getAll().then((function(e){return o(e)}))}),[]),r.a.createElement("div",null,r.a.createElement(h,{message:x}),r.a.createElement("h2",null,"Phone Book"),r.a.createElement("div",null,r.a.createElement("h2",null,"Filter Results"),r.a.createElement(l,{onChange:function(e){b(e.target.value)},type:"text"})),r.a.createElement(m,{numberChangeHandler:function(e){C(e.target.value)},nameChangeHandler:function(e){w(e.target.value)},submitHandler:function(e){return e.preventDefault(),k?O?t.find((function(e){return e.name.toLowerCase()===k.toLowerCase()}))?S("name"):t.find((function(e){return e.number===O}))?S("number"):(n={name:k,number:O},void g.addOne(n).then((function(e){o(t.concat(e)),H({content:"".concat(e.name," was successfully added to the phone book with the number ").concat(e.number),fail:!1}),setTimeout((function(){H(null)}),5e3)})).catch((function(e){H({content:"There seems to have been an error. ".concat(n.name," was not added to the phone book."),fail:!0}),setTimeout((function(){H(null)}),5e3)}))):(H({content:"It looks like you haven't entered a number",fail:!0}),setTimeout((function(){return H(null)}),5e3)):(H({content:"It looks like you haven't entered a name",fail:!0}),setTimeout((function(){return H(null)}),5e3));var n}}),r.a.createElement("h2",null,"Phone Numbers"),r.a.createElement(f,{persons:t,filter:d,clickHandler:function(e){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Are you sure you wish to delete the entry for ".concat(n.name))&&g.deleteOne(e).then((function(){o(t.filter((function(n){return n.id!==e}))),H({content:"All information related to ".concat(n.name," has been removed from the database."),fail:!1}),setTimeout((function(){H(null)}),5e3)})).catch((function(e){H({content:"It looks as though there has been an error removing ".concat(n.name," from the database"),fail:!0}),setTimeout((function(){H(null)}),5e3)}))}(e)}}))};u.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.e56b6a11.chunk.js.map