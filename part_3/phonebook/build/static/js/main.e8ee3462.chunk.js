(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(41)},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(16),c=t.n(o),u=t(6),i=t(3),l=function(e){var n=e.type,t=e.onChange;return r.a.createElement("input",{onChange:t,type:n})},s=function(e){var n=e.type,t=e.onClick,a=e.text;return r.a.createElement("button",{onClick:t,type:n},a)},f=function(e){var n=e.nameChangeHandler,t=e.numberChangeHandler,a=e.submitHandler;return r.a.createElement("form",null,r.a.createElement("label",null,"Name: "),r.a.createElement(l,{onChange:n,type:"text"}),r.a.createElement("label",null,"Number: "),r.a.createElement(l,{onChange:t,type:"number"}),r.a.createElement(s,{onClick:a,type:"submit",text:"submit"}))},m=function(e){var n=e.persons,t=e.filter,a=e.clickHandler;return r.a.createElement("ul",null,n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return r.a.createElement("li",{key:e.id},e.name," - ",e.number,r.a.createElement(s,{onClick:function(){return a(e.id)},type:"submit",text:"Delete"}))})))},d=function(){return r.a.createElement("footer",{className:"footer"},"Made with Love by Making Stuffs")},h=function(e){var n=e.message;if(null===n)return null;var t={padding:"2rem",border:"2px solid ".concat(!0===n.fail?"red":"green"),fontSize:16,borderRadius:10,backgroundColor:"#fff",boxShadow:"0.2rem 0.2rem 0.6rem rgba(0,0,0,0.3)",zIndex:"2",maxWidth:300};return r.a.createElement("div",{className:"notification"},r.a.createElement("p",{style:t},n.content))},b=t(2),p=t.n(b),v=t(4),g=t(5),k=t.n(g),w="/api/persons",E={getAll:function(){var e=Object(v.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.a.get(w),e.abrupt("return",n.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addOne:function(){var e=Object(v.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.a.post(w,n),e.abrupt("return",t.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),deleteOne:function(){var e=Object(v.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.a.delete("".concat(w,"/").concat(n)),e.abrupt("return",t.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),updateOne:function(){var e=Object(v.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.a.put("".concat(w,"/").concat(n.id),n),e.abrupt("return",t.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},y=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),b=s[0],p=s[1],v=Object(a.useState)(""),g=Object(i.a)(v,2),k=g[0],w=g[1],y=Object(a.useState)(""),O=Object(i.a)(y,2),C=O[0],j=O[1],x=Object(a.useState)(null),T=Object(i.a)(x,2),H=T[0],N=T[1],S=function(e){return"name"===e?function(){var e=Object(u.a)({},t.find((function(e){return e.number===C}))),n="".concat(e.number," is already in the phone book under the name ").concat(e.name,". Would you like to change the name to ").concat(k,"?");window.confirm(n)&&(e.name=k,E.updateOne(e).then((function(n){o(t.map((function(n){return n.id!==e.id?n:e}))),N({content:"The name associated with the number ".concat(n.number," has been changed to ").concat(n.name),fail:!1}),setTimeout((function(){N(null)}),5e3)})).catch((function(n){N({content:"It looks as though there has been an error. The name associated with ".concat(e.number," has not been updated."),fail:!0}),setTimeout((function(){N(null)}),5e3)})))}():function(){var e=Object(u.a)({},t.find((function(e){return e.name.toLowerCase()===k.toLowerCase()}))),n="".concat(e.name," is already in the phone book. Would you like to update the phone number to ").concat(C,"?");window.confirm(n)&&(e.number=C,E.updateOne(e).then((function(n){o(t.map((function(n){return n.id!==e.id?n:e}))),N({content:"The number associated with ".concat(n.name," has been changed to ").concat(n.number),fail:!1}),setTimeout((function(){N(null)}),5e3)})).catch((function(n){N({content:"It looks as though there has been an error. The number for ".concat(e.name," has not been updated."),fail:!0}),setTimeout((function(){N(null)}),5e3)})))}()};return Object(a.useEffect)((function(){E.getAll().then((function(e){return o(e)}))}),[]),r.a.createElement("div",{className:"phonebook"},r.a.createElement(h,{message:H}),r.a.createElement("h2",null,"Phone Book"),r.a.createElement("div",{className:"filter"},r.a.createElement("h3",null,"Filter Results"),r.a.createElement(l,{onChange:function(e){p(e.target.value)},type:"text"})),r.a.createElement(f,{numberChangeHandler:function(e){j(e.target.value)},nameChangeHandler:function(e){w(e.target.value)},submitHandler:function(e){return e.preventDefault(),console.log(k,C),k&&void 0!==k?C&&void 0!==C?t.find((function(e){return e.name.toLowerCase()===k.toLowerCase()}))?S("number"):t.find((function(e){return e.number===C}))?S("name"):(n={name:k,number:C},void E.addOne(n).then((function(e){o(t.concat(e)),N({content:"".concat(e.name," was successfully added to the phone book with the number ").concat(e.number),fail:!1}),setTimeout((function(){N(null)}),5e3)})).catch((function(e){console.log(e),N({content:"".concat(e.response.data),fail:!0}),setTimeout((function(){N(null)}),5e3)}))):(N({content:"It looks like you haven't entered a number",fail:!0}),setTimeout((function(){return N(null)}),5e3)):(N({content:"It looks like you haven't entered a name",fail:!0}),setTimeout((function(){return N(null)}),5e3));var n}}),r.a.createElement("div",{className:"list"},r.a.createElement("h3",null,"Phone Numbers"),r.a.createElement(m,{persons:t,filter:b,clickHandler:function(e){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Are you sure you wish to delete the entry for ".concat(n.name))&&E.deleteOne(e).then((function(a){console.log(a),o(t.filter((function(n){return n.id!==e}))),N({content:"All information related to ".concat(n.name," has been removed from the database."),fail:!1}),setTimeout((function(){N(null)}),5e3)})).catch((function(e){console.log(e),N({content:"It looks as though there has been an error removing ".concat(n.name," from the database"),fail:!0}),setTimeout((function(){N(null)}),5e3)}))}(e)}})),r.a.createElement(d,null))};t(40);c.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.e8ee3462.chunk.js.map